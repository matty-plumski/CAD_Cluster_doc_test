
<!-- Version: 0.9.4 (build #dcaa3875fc7d7a0480bd0d689c7e32bfbdead443) | Tue Mar 21 2017 2:48 -->
<!doctype html>
<html lang="">
<head>

    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title></title>
    <link rel="icon" href="../favicon.ico" type="image/x-icon">
      <!-- Fav icons compatible with all major browsers and devices -->
  <link rel="apple-touch-icon" sizes="180x180" href="../images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../images/favicon-16x16.png">
  <link rel="manifest" href="../site.webmanifest">
  <link rel="mask-icon" href="../images/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#00aba9">
  <meta name="theme-color" content="#ffffff">


  <!-- toolkit styles -->
  <link rel="stylesheet" href="https://static.victoria.ac.nz/toolkit.min.css">
  <!-- /toolkit styles -->

</head>


<body>


<!-- If 'fabricator=true' is present in page's annotation. -->

<!-- If 'fabricator=false' is present or attribute is not present at all in the annotation. -->

<div class="global" id="global-nav">

    <div class="menu-toggle horisontal-links">
        <a href="javascript:void(0);"><div class="logo-mini">&nbsp;</div></a>
        <!-- <a href="javascript:void(0);" class="icon-2x icon-menu js-toggle-global-nav align-right"></a> -->
        <!-- <a href="javascript:void(0);" class="lines-button x js-toggle-global-nav align-right" role="button" aria-label="Toggle Navigation"><span class="lines"></span></a> -->
        <a href="javascript:void(0);" class="js-toggle-global-nav" role="button" aria-label="Toggle Navigation">

    			<span class="tcon tcon-menu--xcross" aria-label="toggle menu" style="float:right;">
    			  <span class="tcon-menu__lines" aria-hidden="true"></span>
    			  <span class="tcon-visuallyhidden">toggle menu</span>
    			</span>

        </a>
        <!-- <div class="mobile logo-mini"></div> -->
    </div>

    <div class="menu">
        <nav>
            <div class="search">
                <form method="get" action="http://victoria.ac.nz/search">
                    <div role="search">
                        <a href="javascript:void(0);" class="js-toggle-global-search hide-on-mobile">
    						<span class="tcon tcon-search--xcross " aria-label="toggle search">
    						  <span class="tcon-search__item" aria-hidden="true"></span>
    						  <span class="tcon-visuallyhidden">toggle search</span>
    						</span>
                        </a>
                        <!-- <a href="#" class="icon-search js-toggle-global-search hide-on-mobile"></a> -->
                        <label class="input-wrapper -icon-search" id="global-search">

                            <input type="text" autocomplete="off" name="q" placeholder="Search Victoria for…" required>
                            <input type="submit" value="Go">

                        </label>
                    </div>
                </form>

                <div class="horisontal-links align-center hide-on-desktop">
                    <a href="#"><span class="icon-home"></span>Home</a>
                    <a href="#"><span class="icon-phone"></span>Contact</a>
                </div>
            </div>

            <div id="menu">
                <a href="index.html" class="home">
                    <span class="icon-globe hanging-icon"></span>
                    <span class="hide-on-desktop">CAD Research Cluster Documentation</span>
                </a>
                <a href="index.html">Cluster Description</a>
                <a href="accessing-the-cluster.html">Acessing the Cluster</a>
                <a href="basic-commands.html">Basic Commands</a>
                <a href="running-jobs.html">Running Jobs</a>
                <a href="parallel-processing.html">Parallel Processing</a>
                <a href="managing-jobs.html">Managing Jobs</a>
                <a href="using-containers.html">Using Containers</a>
                <a href="examples.html">Examples</a>

            </div>
        </nav>
        </div> 
</div>
<!-- Default fallback for header when not specified in the template. -->
<header role="banner" class="site-header">
    <div class="block centraliser">

        <!-- Logotype -->
        <div class="logo">
            <a href="/" title="Victoria University of Wellington homepage">
                <picture>
                	<source media="(max-width: 43em)" srcset="images/logo-black-mini.svg" height="1">
                    <source media="(max-width: 68em)" srcset="images/logo-white-portrait.svg">
                    <img src="images/logo-white-full.svg" alt="Victoria University of Wellington - Te Whare Wānanga o te Ūpoko o te Ika a Māui">
                </picture>
            </a>
        </div>

        <!-- Introductory block -->
        <div class="site-intro" id="myHeader">

            <a href="#" title="homepage">
                <h1>
                  CAD Research Cluster Documentation
                    <small lang="mi"> The CAD Cluster is a Slurm-based high-performance computing cluster at VUW </small>
                </h1>
            </a>
        </div>

    </div>
</header>


 <!-- 'Go up' button -->
  <a href="javascript:;" id="btn-up" title="Go to the top of the page" class="btn-floating sticky bottom" tabindex="-1"><span class="icon-arrow-up"></span></a>

  <!-- 'Edit page' button -->
  <a href="/_edit" id="btn-admin" style="display: none;" title="Edit the page in Squiz administration" class="btn-floating top" tabindex="-1"><span class="icon-edit"></span></a>



	

<!-- 2) Sidebar + Content only -->
<section class="layout centraliser block">
  
    <!-- Left 'submenu' column -->
    <div class="sidebar"> 
      
        <nav class="site" role="navigation">
            <a href="#" class="back hide-on-desktop">
              <span class="icon-back hanging-icon"></span>
              <div>

              </div>
            </a>
          
            <!-- <p>No Children</p> -->
            <ul>
              <!-- Parents in descending order -->
              <li><a href="http://www.victoria.ac.nz/fhss">Faculty's Home</a></li>
              <li><a href="http://www.victoria.ac.nz/fhss/about">About us</a></li>
              <li><a href="http://www.victoria.ac.nz/fhss/about/committees-boards">Committees and boards</a></li>
          
              <li>
          
                <!-- Previous page -->
                <!-- <a href="http://www.victoria.ac.nz/fhss/about/committees-boards">Committees and boards</a> -->
          
                <!-- Subpages -->
                <ul>
          
                  <li>
          
                    <!-- Parent page -->
                    <a href="index.html">
                      Cluster Description
                    </a>
          
                    <!-- All the children -->
                    <ul>
                      <li>
                        <a href="accessing-the-cluster.html" >
                          Accessing the cluster
                        </a>
                      </li>
                      <li>
                        <a href="basic-commands.html" >
                          Basic commands
                        </a>
                      </li>
                      <li>
                        <a href="running-jobs.html">
                          Running jobs
                        </a>
                      </li>
                          <li >
                        <a href="parallel-processing.html">
                          Parallel processing
                        </a>
                      </li>
                      <li>
                        <a href="managing-jobs.html" >
                          Managing jobs
                        </a>
                      </li>
                      <li>
                        <a href="using-containers.html">
                          Using containers
                        </a>
                      </li>
                      <li>
                        <a href="examples.html" class="selected">
                          Examples
                        </a>
                      </li>

                    </ul>
                  </li>
          
                </ul>
          
              </li>
            </ul>
          </nav>
          
    </div>

    <style>
        .grid figure {
          cursor: pointer;
        }
      </style>
  
    <!-- Center 'content' and right 'widget' columns -->
    <div class="content-panel">


<!-- Center 'content' and right 'widget' columns -->
<main>
<div class="block formatting">

<div class="homepage-base layout">
  <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">

<h1 id="examples">Examples</h1>

<h4 id="simple-python-program-using-virtualenv-and-pip">Simple Python program using virtualenv and pip</h4>

<p>First we need to create a working directory and move there</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir python_test
<span class="nb">cd </span>python_test
</code></pre></div></div>
<p>Next we load the python 3 module and use python 3 to create a python virtualenv.  This way we can install pip packages which are not installed on the cluster</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module load python/3.6.6 
python3 <span class="nt">-m</span> venv mytest
</code></pre></div></div>

<p>Activate the <code class="highlighter-rouge">mytest</code> virtualenv and use pip to install the <code class="highlighter-rouge">webcolors</code> package</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source </span>mytest/bin/activate
pip install webcolors
</code></pre></div></div>

<p>Create the file test.py with the following contents using nano</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">webcolors</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>
<span class="kn">from</span> <span class="nn">socket</span> <span class="kn">import</span> <span class="n">gethostname</span>

<span class="n">colour_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">webcolors</span><span class="o">.</span><span class="n">css3_hex_to_names</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="n">requested_colour</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">colour_list</span><span class="p">))</span>
<span class="n">colour_name</span> <span class="o">=</span> <span class="n">colour_list</span><span class="p">[</span><span class="n">requested_colour</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>

<span class="k">print</span><span class="p">(</span><span class="s">"Random colour name:"</span><span class="p">,</span> <span class="n">colour_name</span><span class="p">,</span> <span class="s">" on host: "</span><span class="p">,</span> <span class="n">gethostname</span><span class="p">())</span>
<span class="sb">``</span><span class="err">`</span><span class="n">bash</span>
<span class="n">Alternatively</span> <span class="n">download</span> <span class="n">it</span> <span class="k">with</span> <span class="n">wget</span>
<span class="sb">``</span><span class="err">`</span><span class="n">bash</span>
<span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">eResearchSandpit</span><span class="o">/</span><span class="n">vuwrc</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">python_venv</span><span class="o">/</span><span class="n">test</span><span class="o">.</span><span class="n">py</span>
</code></pre></div></div>

<p>Using nano create the submissions script called python_submit.sh with the following content - change <code class="highlighter-rouge">me@email.com</code> to your email address.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c">#</span>
<span class="c">#SBATCH --job-name=python_test</span>
<span class="c">#SBATCH -o python_test.out</span>
<span class="c">#SBATCH -e python_test.err</span>
<span class="c">#</span>
<span class="c">#SBATCH --cpus-per-task=1</span>
<span class="c">#SBATCH --mem-per-cpu=1G</span>
<span class="c">#SBATCH --time=10:00</span>
<span class="c">#</span>
<span class="c">#SBATCH --mail-type=BEGIN,END,FAIL</span>
<span class="c">#SBATCH --mail-user=me@email.com</span>

module load python/3.6.6 

<span class="nb">source </span>mytest/bin/activate 
srun python test.py
</code></pre></div></div>
<p>Alternatively download it with wget</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://raw.githubusercontent.com/eResearchSandpit/vuwrc/master/examples/python_venv/python_submit.sh
</code></pre></div></div>

<p>To submit your job to the Slurm scheduler</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sbatch python_submit.sh
</code></pre></div></div>

<p>Check for your job on the queue with <code class="highlighter-rouge">squeue</code> though it might finish very fast.  The output files will appear in your working directory.</p>
</div>
   
   <br>
   <br>
   <br>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        
        <p class="copyright">CAD Research Cluster Documentation maintained by <a href="https://github.com/matty-plumski">matty-plumski</a></p>
        
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a><p>
       
      </footer>
    </div>

       </section>




<!-- If 'fabricator=false' is present or attribute is not present at all in the annotation. -->

<!-- Default fallback for footer when not specified in the template. -->
<footer role="contentinfo">

    <!-- Links and contacts that can vary between sub-sites -->
    <section class="footer-secondary two-columns">
        <div class="centraliser">

            <!-- Sub-site's related or recommended links -->
            <div class="block">

                <h2>Useful links</h2>
                <nav role="navigation">
                    <ul role="menubar">
                        <li>
                            <a href="https://software-carpentry.org/" role="menuitem" >Software Carpentry</a>
                        </li>
                        <li>
                            <a href="https://hpc-carpentry.github.io/" role="menuitem">HPC Carpentry</a>
                        </li>
                        <li>
                            <a href="#" role="menuitem" title="Read PhD guidelines">PhD guidelines</a>
                        </li>
                        <li>
                            <a href="#" role="menuitem" title="Read Contacts and directories">Contacts and directories</a>
                        </li>
                        
                    </ul>
                </nav>

            </div>

            <!-- Sub-site's related links -->
            <div class="block contacts">

                <a href="#" title="See more contact information" class="link-more">Other contacts</a>
                <h2>Useful contacts</h2>

                <address>

                    <!-- Mail addresses -->
                    <ul class="mails">
                        <li>
                            <a href="mailto:compute@victoria.ac.nz" title="Send an email to compute@victoria.ac.nz">compute@victoria.ac.nz</a>
                        </li>
                    </ul>
                </address>

            </div>

        </div>
    </section>

    <!-- Related links from global site -->
    <section class="footer-secondary">
        <div class="centraliser">
            <div class="block">
                <h2>Victoria University</h2>

                <nav role="navigation">
                    <ul role="menubar">
                        <li role="menuitem"><a href="#" role="menuitem" title="Read about ...">Faculties</a></li>
                        <li role="menuitem"><a href="#" role="menuitem" title="Read about ...">Contacts and directories</a></li>
                        <li role="menuitem"><a href="#" role="menuitem" title="Read about ...">Campuses</a></li>
                        <li role="menuitem"><a href="#" role="menuitem" title="Read about ...">Study</a></li>
                        <li role="menuitem"><a href="#" role="menuitem" title="Read about ...">Students</a></li>
                        <li role="menuitem"><a href="#" role="menuitem" title="Read about ...">Students</a></li>
                        <li role="menuitem"><a href="#" role="menuitem" title="Read about ...">Staff</a></li>
                        <li role="menuitem"><a href="#" role="menuitem" title="Read about ...">Careers</a></li>
                        <li role="menuitem"><a href="#" role="menuitem" title="Read about ...">Alumni</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </section>

    <!-- Meta-links and contacts that are shared between sub-sites -->
    <section class="footer-primary">
        <div class="centraliser">

            <div class="block">

                <!-- Smaller version of logotype -->
                <div class="logo">
                    <a href="/" title="Victoria University of Wellington homepage">
                        <img class="logo"  src="images/logo-white-full.svg" alt="Victoria University of Wellington - Te Whare Wānanga o te Ūpoko o te Ika a Māui">
                    </a>
                </div>

                <!-- Global contacts -->
                <ul class="contacts">
                    <li>
                        <a title="Call Victoria about general enquiries" href="tel:+6444721000">+64 4 472 1000</a>
                    </li>
                    <li>
                        <a title="Write Victoria an email" href="mailto:info@victoria.ac.nz">info@victoria.ac.nz</a>
                    </li>
                    <li>
                        Enrolments: <a title="Call Victoria regarding enrolments" href="tel:+64800842867">0800 VICTORIA</a>
                    </li>
                    <li>
                        Emergency: <a title="Call in case of emergency" href="tel:+6444639999">+64 4 463 9999</a> or ext. 8888 (internal)
                    </li>
                </ul>

            </div>

        </div>
    </section>

</footer>


<!-- List STYLES -->


  <!-- jQuery -->
  <script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>

<script src="https://static.victoria.ac.nz/toolkit.min.js"></script>


</body>
</html>
